const paginators=document.querySelectorAll("li a[href='#visit-heading']");let total,magicTowns,limit="/magicTowns"==window.location.pathname?15:5,page=1,maxPage=1;function fillGrid(a){clearHTML();const n=document.querySelector(".items .row");a.forEach(a=>{const t=document.createElement("div");t.classList.add("col-lg-12"),t.innerHTML+=`\n    <div class="col-lg-12">\n      <div class="item">\n        <div class="row">\n          <div class="col-lg-4 col-sm-5">\n            <div class="image" style='height: 100%'>\n              <img loading="lazy" src='${a.images[0]}' alt='${a.magicTown}' style='height: 100%; object-fit: cover;'>\n            </div>\n          </div>\n          <div class="col-lg-8 col-sm-7">\n            <div class="right-content">\n              <h4>${a.magicTown.split(",")[0]}</h4>\n              <span>${a.state}, México</span>\n              <div class="main-button">\n                <a href="/magicTowns/${a.id}">Conocer más</a>\n              </div>\n              <p>${a.description}</p>\n              <ul class="info">\n                <li><i class="fa fa-user"></i> ${a.population} habitantes</li>\n                <li><i class="fa fa-globe"></i> La: ${a.latitude}</li>\n                <li><i class="fa fa-globe"></i> Lo: ${a.longitude}</li>\n              </ul>\n              <div class="text-button">\n                <a href="${a.wiki}" target="_blank" rel="noreferrer">¿Sabes cómo llegar?<i class="fa fa-arrow-right"></i></a>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  `,n.appendChild(t)})}function updatePaginator(a){1==a?paginators[0].style.display="none":a==maxPage-1?(paginators[3].style.display="none",paginators[2].style.display="inline-block",paginators[4].style.display="inline-block"):a==maxPage?(paginators[2].style.display="none",paginators[3].style.display="none",paginators[4].style.display="none"):(paginators[0].style.display="inline-block",paginators[2].style.display="inline-block",paginators[3].style.display="inline-block",paginators[4].style.display="inline-block"),paginators[0].dataset.page=+a-1,paginators[1].dataset.page=+a,paginators[1].textContent=+a,paginators[2].dataset.page=+a+1,paginators[2].textContent=+a+1,paginators[3].dataset.page=+a+2,paginators[3].textContent=+a+2,paginators[4].dataset.page=+a+1}function clearHTML(){const a=document.querySelector(".items .row");for(;a.firstChild;)a.firstChild.remove()}async function getAllMagicTowns(){const a=await fetch(window.location.origin+"/v1/magicTowns");return await a.json()}async function getMagicTowns(){const a=await fetch(`${window.location.origin}/v1/magicTowns?limit=${limit}&page=${page}`);return await a.json()}async function getTotalPages(){magicTowns=await getAllMagicTowns(),maxPage=Math.ceil(magicTowns.length/limit)}function initMap(a){const n=new google.maps.Map(document.getElementById("map"),{zoom:6,center:{lat:23.6345,lng:-102.5528}});a.forEach(a=>{new google.maps.Marker({position:{lat:a.latitude,lng:a.longitude},map:n})})}function getUserPosition(){"geolocation"in navigator?navigator.geolocation.getCurrentPosition(getShortestMagicTown,showError):console.log("Errorr")}function getShortestMagicTown(a){const n=a.coords.latitude,t=a.coords.longitude;let i,o,e=99999999999,s=0;magicTowns.forEach(a=>{const l=Math.sqrt(Math.pow(n-a.latitude,2)+Math.pow(t-a.longitude,2));l<e&&(e=l,i=a),l>s&&(s=l,o=a)}),showMagicTown(i,o)}function showError(a){console.error(a)}function showMagicTown(a,n){const t=a.magicTown,i=n.magicTown,o=document.querySelector(".side-bar-map .row .col-lg-12"),e=document.createElement("div");e.innerHTML=`\n  <br>\n  <p>El pueblo mágico más cercano a ti es: <span class='d-block fw-bold'> - ${t}</span></p>\n  <br>\n  <p>El pueblo mágico más lejano a ti es: <span class='d-block fw-bold'> - ${i}</span></p>\n  `,o.appendChild(e)}document.addEventListener("DOMContentLoaded",async()=>{await getTotalPages(),document.querySelector("#map")&&(window.initMap=initMap(magicTowns),getUserPosition()),paginators&&(paginators[0].style.display="none",paginators.forEach(a=>{a.addEventListener("click",async()=>{page=a.dataset.page,updatePaginator(page);fillGrid(await getMagicTowns())})}))});
//# sourceMappingURL=app.js.map
